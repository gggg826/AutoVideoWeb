# 无人值守开发准备清单

## 1. 环境准备 ✅

### 1.1 系统要求检查

```bash
# Python 版本检查 (需要 3.10+)
python --version

# pip 版本检查
pip --version

# Git 检查
git --version
```

**必需项**:
- ✅ Python 3.10 或更高版本
- ✅ pip 最新版本 (建议 23.0+)
- ✅ Git 2.0+
- ✅ 至少 2GB 可用磁盘空间
- ✅ 至少 4GB 可用内存

**可选项**:
- ⬜ Docker Desktop (用于容器化部署)
- ⬜ Redis (Phase 2 功能)
- ⬜ PostgreSQL (Phase 2 功能)

### 1.2 开发工具

**推荐安装**:
- ⬜ VSCode / PyCharm (IDE)
- ⬜ Postman / Insomnia (API 测试)
- ⬜ DB Browser for SQLite (数据库查看)

## 2. 项目配置决策 🎯

### 2.1 环境配置确认

请确认以下配置信息（我会帮你创建 .env 文件）：

```env
# 应用配置
APP_NAME=AdAllianceTools Test Site
DEBUG=true  # 开发环境: true, 生产环境: false

# 服务器配置
HOST=0.0.0.0
PORT=8000  # 你希望使用的端口号？

# 管理员账户
ADMIN_USERNAME=admin  # 你希望的管理员用户名？
ADMIN_PASSWORD=?      # 你希望设置的管理员密码？（至少8位，建议包含大小写字母和数字）

# 安全密钥
SECRET_KEY=?  # 我会自动生成一个随机密钥

# CORS 允许的域名
ALLOWED_ORIGINS=http://localhost:8000,http://127.0.0.1:8000  # 需要添加其他域名吗？
```

**需要你决定的配置**:
1. **端口号**: 默认 8000，如果被占用是否需要更改？
2. **管理员用户名**: 默认 admin，是否需要更改？
3. **管理员密码**: 需要设置一个安全的密码
4. **CORS域名**: 是否需要添加其他允许访问的域名？

### 2.2 数据库选择

**Phase 1 (Week 1-3)**:
- ✅ SQLite (推荐，开箱即用)
- 路径: `data/tracker.db`
- 无需额外配置

**Phase 2 (可选扩展)**:
- ⬜ PostgreSQL (大数据量场景)
- ⬜ Redis (缓存和实时推送)

**现在使用**: SQLite (默认)

### 2.3 功能优先级确认

请确认你希望的开发顺序：

**必须实现 (P0 - Week 1)**:
- ✅ 访问追踪 API
- ✅ 指纹采集
- ✅ 行为记录
- ✅ 数据库存储

**重要功能 (P1 - Week 2-3)**:
- ✅ 管理后台仪表盘
- ✅ 访问日志查看
- ✅ 统计分析
- ✅ 异常检测
- ✅ 真实性评分

**优化功能 (P2 - Week 4)**:
- ⬜ WebSocket 实时推送 - **是否需要？**
- ⬜ 数据导出 (CSV/JSON) - **是否需要？**
- ⬜ 性能优化和缓存 - **是否需要？**
- ⬜ Docker 部署 - **是否需要？**

**你可以跳过的功能**（告诉我哪些不需要）:
- ⬜ 实时推送（如果不需要实时监控）
- ⬜ 数据导出（如果不需要导出功能）
- ⬜ Docker（如果不需要容器化部署）

### 2.4 前端技术选择

**CSS 框架**:
- ⬜ 选项 A: Tailwind CSS (现代、灵活、体积小)
- ⬜ 选项 B: Bootstrap 5 (组件丰富、上手快)
- ⬜ 选项 C: 原生 CSS (最轻量，需要自己写样式)

**推荐**: Tailwind CSS (CDN 方式，无需构建)

**图表库**:
- ✅ Chart.js (已确定)

**表格组件**:
- ✅ DataTables (已确定)

## 3. 开发约束和偏好 📐

### 3.1 代码风格

**Python**:
- ✅ 使用 Black 格式化 (88 字符)
- ✅ 使用类型提示 (Type Hints)
- ✅ 遵循 PEP 8 规范

**JavaScript**:
- ✅ ES6+ 语法
- ✅ 使用 const/let (不使用 var)
- ✅ 函数式编程优先

**需要确认**:
- 代码注释语言: **中文** 还是 **英文**？（推荐中文，方便理解）
- API 文档: 是否需要详细的中文注释？

### 3.2 测试要求

**单元测试**:
- ⬜ 需要完整的单元测试 (目标覆盖率 80%+)
- ⬜ 只测试关键功能 (目标覆盖率 50%+)
- ⬜ 暂时跳过测试，先实现功能

**推荐**: 先实现功能，Week 4 再补充测试

**性能测试**:
- ⬜ 需要完整的性能测试 (Locust)
- ⬜ 简单的性能测试
- ⬜ 暂时跳过

## 4. 外部服务配置 🌐

### 4.1 IP 地理位置服务 (可选)

**选项 1: 免费服务**:
- ⬜ ipapi.co (免费额度: 1000 请求/天)
- ⬜ ip-api.com (免费，无需 API Key)
- ⬜ 暂时不使用（跳过地理位置功能）

**选项 2: 付费服务** (更高精度):
- ⬜ MaxMind GeoIP2
- ⬜ IPGeolocation.io

**推荐**: 开发阶段使用 ip-api.com (免费，无需配置)

### 4.2 其他可选服务

**错误追踪** (可选):
- ⬜ Sentry (错误监控)
- ⬜ 暂时不需要

**日志服务** (可选):
- ⬜ 本地文件日志 (默认)
- ⬜ 云端日志服务

## 5. 项目结构确认 📁

我将创建以下目录结构，请确认是否需要调整：

```
AutoVideoWeb/
├── backend/
│   ├── app/                    # 应用代码
│   ├── scripts/                # 管理脚本
│   ├── tests/                  # 测试代码
│   ├── requirements.txt        # 依赖
│   └── .venv/                  # 虚拟环境（会自动创建）
├── frontend/
│   ├── public/                 # 测试页面
│   ├── admin/                  # 管理后台
│   └── static/                 # 静态资源
├── data/                       # 数据目录
│   ├── tracker.db             # 数据库文件（会自动创建）
│   ├── exports/               # 导出文件
│   └── logs/                  # 日志文件
├── docker/                     # Docker 配置（可选）
├── docs/                       # 文档
└── .env                        # 环境配置（会自动创建）
```

**需要调整吗？** 比如：
- 是否需要将 backend 和 frontend 合并？
- 是否需要不同的数据目录位置？

## 6. 开发计划确认 📅

### 6.1 开发阶段

**Week 1: 基础功能** (必须完成)
- Phase 0: 项目初始化 (0.5 天)
- Phase 1: 数据库和模型 (1 天)
- Phase 2: 追踪 API (1.5 天)
- Phase 3: 前端追踪脚本 (2 天)

**Week 2: 管理后台** (重要)
- 认证系统
- 仪表盘
- 访问日志
- 统计分析

**Week 3: 高级功能** (重要)
- 异常检测
- 真实性评分
- 数据导出

**Week 4: 优化部署** (可选)
- 性能优化
- 测试
- Docker 部署

**你的时间偏好**:
- ⬜ 完整实现所有功能（4周）
- ⬜ 只实现核心功能（2周，Week 1-2）
- ⬜ 快速原型（1周，只实现 Week 1）

### 6.2 开发模式

**选项 1: 完全无人值守**
- 我会按照计划自动实现所有功能
- 每个阶段完成后会 git commit
- 遇到需要决策的地方会询问你

**选项 2: 检查点模式**
- 完成每个 Phase 后暂停
- 等待你测试和确认
- 确认无误后继续下一个 Phase

**选项 3: 交互模式**
- 实现每个功能前先询问
- 实时调整实现方案
- 更加灵活，但需要更多参与

**推荐**: 检查点模式（平衡自动化和质量控制）

## 7. 准备检查清单 ✓

请确认以下所有项目已准备就绪：

### 7.1 必需项

- ⬜ Python 3.10+ 已安装并可用
- ⬜ Git 已配置（用户名、邮箱）
- ⬜ 项目目录有写入权限
- ⬜ 管理员密码已决定
- ⬜ 已阅读 ARCHITECTURE.md 和 IMPLEMENTATION_PLAN.md

### 7.2 配置决策

- ⬜ 端口号已确认（默认 8000）
- ⬜ 管理员账号已确认（默认 admin）
- ⬜ 功能优先级已确认（Phase 1-3 必须，Phase 4 可选）
- ⬜ CSS 框架已选择（推荐 Tailwind）
- ⬜ 开发模式已选择（推荐检查点模式）

### 7.3 可选项

- ⬜ IP API 服务已选择（推荐 ip-api.com 免费版）
- ⬜ 是否需要 WebSocket 实时推送
- ⬜ 是否需要 Docker 部署
- ⬜ 测试覆盖率要求已确认

## 8. 快速决策模板 🚀

如果你不想逐项确认，可以直接告诉我以下任一选项：

### 选项 A: 标准配置（推荐）
```
- 端口: 8000
- 管理员: admin / Admin@123456
- 功能: Week 1-3 全部实现
- CSS: Tailwind CDN
- IP服务: ip-api.com (免费)
- 测试: Week 4 补充
- 部署: 暂不需要 Docker
- 模式: 检查点模式
```

### 选项 B: 快速原型
```
- 端口: 8000
- 管理员: admin / Admin@123
- 功能: 只实现 Week 1 (核心追踪)
- CSS: Bootstrap 5 CDN
- IP服务: 跳过
- 测试: 跳过
- 部署: 跳过
- 模式: 完全无人值守
```

### 选项 C: 完整版本
```
- 端口: 8000
- 管理员: admin / Admin@123456
- 功能: Week 1-4 全部实现
- CSS: Tailwind CDN
- IP服务: ipapi.co (需要API Key)
- 测试: 完整测试（80%+ 覆盖率）
- 部署: Docker + docker-compose
- 模式: 检查点模式
```

### 选项 D: 自定义
```
请告诉我你的具体需求...
```

## 9. 开始命令 🎬

确认准备就绪后，你可以使用以下命令开始：

### 方式 1: 使用 Claude Code 命令
```bash
# 标准配置
请按照选项 A (标准配置) 开始无人值守开发

# 快速原型
请按照选项 B (快速原型) 开始无人值守开发

# 完整版本
请按照选项 C (完整版本) 开始无人值守开发
```

### 方式 2: 自定义配置
```bash
请开始无人值守开发，配置如下：
- 管理员密码: [你的密码]
- 实现范围: Week 1-3
- CSS框架: Tailwind
- 开发模式: 检查点模式
- [其他特殊要求...]
```

### 方式 3: 逐步开始
```bash
# 先只创建项目结构和配置
请帮我完成 Phase 0: 项目初始化

# 然后逐步进行
请继续 Phase 1: 数据库和模型
```

## 10. 注意事项 ⚠️

### 10.1 开发过程中

- ✅ 我会自动 git commit，你可以随时回退
- ✅ 遇到需要决策的地方会询问你
- ✅ 每个 Phase 完成会生成测试命令供你验证
- ✅ 出现错误会自动重试或询问你

### 10.2 数据安全

- ✅ .env 文件已在 .gitignore 中（不会上传密码）
- ✅ 数据库文件不会上传到 git
- ✅ 建议定期备份 data/ 目录

### 10.3 推荐的工作流

1. **Phase 完成后测试**
   ```bash
   # 启动服务
   python run.py

   # 测试 API
   curl http://localhost:8000/health
   ```

2. **发现问题立即反馈**
   - 说明问题现象
   - 提供错误信息
   - 我会立即修复

3. **阶段性验收**
   - Week 1 完成：测试追踪功能
   - Week 2 完成：测试管理后台
   - Week 3 完成：测试统计分析

## 11. 常见问题提前解答 ❓

### Q1: 开发过程中可以修改需求吗？
**A**: 可以，随时告诉我需要调整的地方，我会重新实现。

### Q2: 如果中途出错怎么办？
**A**: 我会自动重试，如果无法解决会询问你。你也可以用 git reset 回退到上一个提交。

### Q3: 可以暂停开发吗？
**A**: 可以，随时说"暂停"，我会保存当前进度并提交代码。

### Q4: 开发完成后如何部署？
**A**: Week 4 会提供完整的部署文档和 Docker 配置，也可以使用传统方式部署。

### Q5: 数据库可以切换吗？
**A**: 可以，SQLAlchemy 支持多种数据库，切换到 PostgreSQL 只需修改连接字符串。

---

## 🎯 现在就开始？

如果以上准备都已完成，请告诉我：

1. **你的选择**: 选项 A / B / C / D（自定义）
2. **管理员密码**: 你希望设置的密码
3. **特殊要求**: 如果有任何特殊需求

例如：
```
请按照选项 A（标准配置）开始，管理员密码设置为: MySecurePass@2025
```

或者直接说：
```
开始 Phase 0 项目初始化
```

**准备好了吗？** 🚀
